window._bd_share_main.F.module("view/like_view",function(t,e,n){t("like.css");var d=t("base/tangram").T,a=t("base/class").Class,u=t("conf/const"),i=t("view/view_base"),s=t("component/animate"),v={btn:"bdlikebutton",innerBtn:"bdlikebutton-inner",add:"bdlikebutton-add",text:"bdlikebutton-text",count:"bdlikebutton-count"};e.View=a.create(function(l){function o(t){return d(t).parent().get(0)}var c=this,r={small:[4,"顶","已顶过"],medium:[6,"顶","您已顶过"],large:[10,"该内容对我有帮助","您已顶过，谢谢！"]};c.render=function(t){var e,n,a,i=(a=l.tag||"",d("."+v.btn).each(function(t,e){(!a||d(e).attr(u.CONFIG_TAG_ATTR)==a)&&c._entities.push(e)}),c._entities),o=v.btn,s=(n=r[(e=l).type],e.likeText=e.likeText?e.likeText.substr(0,n[0]):n[1],e.likedText=e.likedText?e.likedText.substr(0,n[0]):n[2],e);c._actBtnSet.className=v.innerBtn,c._actBtnSet.tagName="div",c._actBtnSet.maxDomDepth=1,d(i).each(function(t,e){var n=s.type,a=[];a.push('<div class="',v.innerBtn,'" ',c._actBtnSet.cmdAttr,'="like">'),a.push('<span class="',v.add,'">+1</span>'),a.push('<div class="',v.count,'">加载中</div>'),"small"!=n&&a.push('<div class="',v.text,'">',s.likeText,"</div>"),a.push("</div>"),d(e).html(a.join("")).addClass(o+"-"+s.color).addClass(o+"-"+s.type).addClass(o+"-"+s.type+"-"+s.color)})},c._init=function(){var i=l,o=i.type;d(c._entities).each(function(t,n){var a=d("."+v.innerBtn,n);a.mouseover(function(t){var e=(t=d.event(t||window.event)).relatedTarget;a.contains(e)||("small"==o&&d("."+v.count,n).html(i.likeText),d(n).addClass(v.btn+"-"+i.type+"-"+i.color+"-hover"))}).mouseout(function(t){var e=(t=d.event(t||window.event)).relatedTarget;a.contains(e)||("small"==o?d("."+v.count,n).html(i.count):d("."+v.text,n).html(i.likeText),d(n).removeClass(v.btn+"-"+i.type+"-"+i.color+"-hover"))})})},c.showDoneState=function(t){var e=l,n=o(t),a=v.text;"small"==e.type&&(a=v.count),d("."+a,n).html(e.likedText),d(n).removeClass(n,v.btn+"-"+e.type+"-"+e.color+"-hover")},c.addOne=function(t,e){var n=l,a=o(t),i=d("."+v.add,a);i.show(),s.animate(i.get(0),{top:"-25px",opacity:"0"},300,function(){i.hide(),i.css({top:"0px",opacity:99})}),c.setNumber(e),d(a).removeClass(v.btn+"-"+n.type+"-"+n.color+"-hover")},c.setNumber=function(n){"number"==d.type(n)&&d(c._entities).each(function(t,e){d("."+v.count,e).html(n)})}},i.ViewBase)});